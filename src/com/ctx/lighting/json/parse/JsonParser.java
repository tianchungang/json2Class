package com.ctx.lighting.json.parse;

import com.ctx.lighting.json.JsonData;
import com.ctx.lighting.json.JsonEntity;
import com.ctx.lighting.json.JsonProperty;
import com.ctx.lighting.json.JsonTypeAdapter;
import com.ctx.lighting.util.StringUtils;
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.internal.LinkedTreeMap;

import java.util.ArrayList;
import java.util.Comparator;
import java.util.List;

public class JsonParser {
    private List<JsonEntity> jsonPropertyLists =  new ArrayList<>();
    private int index = 0;

    public List<JsonEntity> parse(String json,String entityName){
        GsonBuilder gsonBuilder = new GsonBuilder();
        gsonBuilder.registerTypeAdapterFactory(JsonTypeAdapter.FACTORY);
        Gson gson = gsonBuilder.create();

        JsonData jsonData = gson.fromJson(json, JsonData.class);

        return parse(jsonData,entityName);
    }

    public List<JsonEntity> parse(JsonData jsonData,String entityName){
        final Object data = jsonData.getData();
        if(data != null){
            if(data instanceof ArrayList){
                parseList((ArrayList) data,entityName);
            }else if(data instanceof LinkedTreeMap){
                parseMap((LinkedTreeMap<String,Object>) data,entityName);
            }
        }

        this.jsonPropertyLists.sort(Comparator.comparingInt(JsonEntity::getIndex));
        return this.jsonPropertyLists;
    }

    private void parseMap(LinkedTreeMap<String,Object> map,String name){
        JsonEntity jsonPropertyList = new JsonEntity();
        jsonPropertyList.setIndex(this.index++);
        jsonPropertyList.setName(name != null? StringUtils.capitalFirst(name):name);
        for (String key : map.keySet()) {
            Object o = map.get(key);

            key = StringUtils.underline2Camel(key);
            JsonProperty jsonProperty = new JsonProperty();
            jsonProperty.setKey(key);
            jsonProperty.setCapitalKey(StringUtils.capitalFirst(key));
            if(o != null){
                jsonProperty.setType(o.getClass().getSimpleName());
                jsonProperty.setPackageName(o.getClass().getName());
            }else{
                jsonProperty.setType(String.class.getSimpleName());
                jsonProperty.setPackageName(String.class.getName());
            }

            jsonPropertyList.add(jsonProperty);


            if(o != null){
                if(o instanceof ArrayList){
                    if(((ArrayList) o).size()>0){
                        jsonProperty.setType("List<" + jsonProperty.getCapitalKey()+">");
                    }else{
                        jsonProperty.setType("List");
                    }
                    jsonProperty.setPackageName("java.util.List");
                    parseList((ArrayList) o,key);
                }else if(o instanceof LinkedTreeMap){
                    jsonProperty.setType(jsonProperty.getCapitalKey());
                    jsonProperty.setPackageName(null);
                    parseMap((LinkedTreeMap<String,Object>) o,key);
                }
            }



        }

        this.jsonPropertyLists.add(jsonPropertyList);

    }

    private void parseList(ArrayList list,String name){
        if(list != null && !list.isEmpty()){
            Object item = list.get(0);
            if(item instanceof ArrayList){
                parseList((ArrayList) item,null);
            }else if(item instanceof LinkedTreeMap){
                parseMap((LinkedTreeMap) item,name);
            }
        }


    }


    public static void main(String[] args) {
        JsonParser jsonParser = new JsonParser();

        String json = "{\"siteId\":3,\"siteGuid\":\"27161ffa-fddd-4f57-ae6b-5a6332238cb8\",\"siteName\":\"DV2\",\"siteDatabaseName\":\"CityTouchSite_DV2\",\"timeZone\":\"W. Europe Standard Time\",\"culture\":\"en-US\",\"controlSystems\":[],\"customer\":{\"name\":\"Default\",\"comment\":null},\"isAssetManagementEnabled\":true,\"isRemoteManagementEnabled\":false,\"ctcClaiming\":{\"communicationStatus\":\"OnlyClientsWithCommStatusOk\",\"demoMode\":\"NonDemoModeClients\",\"futureProof\":\"OnlyNonFutureProofClients\",\"orderId\":\"DontCare\"},\"acceptLuminaireTypeChanges\":false,\"siteRectangle\":{\"northEast\":{\"latitude\":50.81756,\"longitude\":6.15832},\"southWest\":{\"latitude\":50.7303,\"longitude\":6.01537}},\"sitePolygon\":null,\"enableFactoryProperties\":false,\"energySamplingInterval\":360,\"hourlyEnergyEnabled\":false,\"canCreateApplicationKeys\":false,\"emailsFaults\":true,\"faultEmailTimeOfDayInMinutes\":480,\"maxDimmingCalendars\":10,\"isExternal\":true,\"country\":\"[none]\",\"isUmsugSupported\":false,\"dangerousDimmingThreshold\":0.0,\"isCustomLogoFeatureEnabled\":false,\"isGroupFaultDetectionEnabled\":false,\"faultSettings\":[{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_Event_DaliReportedLampFailure\",\"canConvertToFault\":false,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_1\",\"canConvertToFault\":false,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_100\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_101\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":24.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_102\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":24.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_131\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":24.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_132\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":24.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_133\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":24.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2200\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2201\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2207\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2208\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2209\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2210\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2215\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2220\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2221\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2222\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2223\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2237\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2244\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2245\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2246\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3100\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3101\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3102\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3201\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3401\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3402\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3403\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3404\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3405\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3500\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3501\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3502\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3503\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3504\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3505\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3506\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3507\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3508\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3509\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3510\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3511\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3512\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3513\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3514\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3515\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3516\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3517\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3518\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3528\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3529\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3530\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3531\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3532\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3750\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3550\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_2414\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_5500\",\"canConvertToFault\":false,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_5501\",\"canConvertToFault\":false,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_5502\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_5503\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_5504\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_Groupfault\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsensePLC\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_LampFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsensePLC\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_BallastFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsensePLC\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_PowerFactorLow\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsensePLC\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_NoLoadCurrent\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsensePLC\",\"creationDelayInHours\":24.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_OlcNotReachable\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsensePLC\",\"creationDelayInHours\":24.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_SegmentControllerNotReachable\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsensePLC\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_SegmentControllerOutOfSyncError\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsensePLC\",\"creationDelayInHours\":48.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_SegmentControllerBroken\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsensePLC\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_SegmentControllerInBootromMode\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsensePLC\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_Groupfault\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":48.0,\"closeDelayInHours\":24.0,\"faultErrorKey\":\"Ctc_Event_NoCommunicationWithDali\",\"canConvertToFault\":false,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":48.0,\"closeDelayInHours\":24.0,\"faultErrorKey\":\"Ctc_Event_NoCommunicationWithPowerBox\",\"canConvertToFault\":false,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_Event_NoCommunicationWithEeprom\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_Event_NoGPSFixDuringLongTime\",\"canConvertToFault\":false,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_Event_NoGPSTimeDuringLongTime\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":24.0,\"faultErrorKey\":\"Ctc_Event_NoCommunicationWithMetering\",\"canConvertToFault\":false,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":24.0,\"faultErrorKey\":\"Ctc_Event_MeteringHardwareError\",\"canConvertToFault\":false,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_Event_NoCommunicationWithGPS\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_Event_ErrorInGPSCoordinate\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_Event_PhotocellHardwareError\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_Event_DayBurner\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_Event_GridFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_ErrorKey_NewOlcFoundInLuminaire\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_Event_LampOutage\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_Event_PowerToHigh\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":24.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_ErrorKey_Unreachable\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":24.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_ErrorKey_HasNotCommunicatedSince\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_ErrorKey_ComponentDeactivatedFromSite\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_ErrorKey_LuminaireTypeCannotBeApplied_ActualWattageInvalid\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_ErrorKey_LuminaireTypeCannotBeApplied_LampTechnologyInvalid\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_ErrorKey_LuminaireTypeCannotBeApplied_MinDimmingThresholdInvalid\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_ErrorKey_UnexpectedPowerOutage\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_ErrorKey_Groupfault\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchClient2\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Ctc_ErrorKey_CommunicatingButNoEnergyReported\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_BatteryMode\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_BatteryMode\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_BatteryNotConnected\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_BatteryNotConnected\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_BatteryShutdown\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_BatteryShutdown\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_BreakerContactorError\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_BreakerContactorError\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_CabinetDoorOpen\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_CabinetDoorOpen\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_CurrentAboveThresholdPhaseL1\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_CurrentAboveThresholdPhaseL1\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_CurrentAboveThresholdPhaseL2\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_CurrentAboveThresholdPhaseL2\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_CurrentAboveThresholdPhaseL3\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_CurrentAboveThresholdPhaseL3\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_CurrentBelowThresholdPhaseL1\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_CurrentBelowThresholdPhaseL1\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_CurrentBelowThresholdPhaseL2\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_CurrentBelowThresholdPhaseL2\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_CurrentBelowThresholdPhaseL3\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_CurrentBelowThresholdPhaseL3\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_ErrorInGpsCoordinate\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_ErrorInGpsCoordinate\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_LeakageDetected\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_LeakageDetected\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_LightSwitchingFailed\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_LightSwitchingFailed\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_MainsPowerFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_MainsPowerFailure\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_ManualLightOnOrContactorHanging\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_ManualLightOnOrContactorHanging\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_MissingMeter\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_MissingMeter\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_MissingModule\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_MissingModule\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_ModuleNotResponding\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_ModuleNotResponding\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_NoGpsFixForLongTime\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_NoGpsFixForLongTime\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_VoltageHigh\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_VoltageHigh\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_VoltageLow\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_VoltageLow\"},{\"provider\":\"CityTouchCabinet\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_Groupfault\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"Event_Groupfault\"},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.333,\"closeDelayInHours\":0.5,\"faultErrorKey\":\"Event_DaliFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_OneToTenPfFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.333,\"closeDelayInHours\":0.5,\"faultErrorKey\":\"Event_NoCurrent\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_OneToTenCurrentFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.5,\"closeDelayInHours\":1.0,\"faultErrorKey\":\"Event_VoltageOutOfBounds\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.333,\"closeDelayInHours\":0.5,\"faultErrorKey\":\"Event_DaliCommunicationFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_OlcBroken\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_OlcLightSensorBroken\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_FlashCardFull\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_FlashCardFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_SCnodeMissing\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_SCnodeFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_SCDBFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":24.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_SCFailureNTPNotAvailable\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":24.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_OlcNotReachable\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_SCLightSensorFailed_Error\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_SCLightSensorFailed_NotPresent\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_LightSensorWarning_PossibleDayBurner\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_SC_UPS_Failure_BatteryBroken\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_SC_UPS_Failure_PowerLoss\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":24.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_SegmentControllerNotReachable\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":72.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_OlcNotReachableNew\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":24.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_OlcNotReportingLogData\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":1.0,\"faultErrorKey\":\"Event_PowerTooLowWarning\",\"canConvertToFault\":false,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.333,\"closeDelayInHours\":0.5,\"faultErrorKey\":\"Event_OlcRelayFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.333,\"closeDelayInHours\":0.5,\"faultErrorKey\":\"Event_VoltageOutOfBoundsWarning\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.333,\"closeDelayInHours\":0.5,\"faultErrorKey\":\"Event_DaliIntermittentFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.333,\"closeDelayInHours\":0.5,\"faultErrorKey\":\"Event_DaliIntermittentCommunicationFailure\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":48.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_CommissioningBusy\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":\"FaultMessage_ComissioningBusyTooLong\"},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_CurrentTooHighWarning\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"PhilipsStarsenseRF\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Event_Groupfault\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"Simulator\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Issue_LoadCurrent\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"Simulator\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Issue_Unreachable_SegmentController\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"Simulator\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"IssueLeakageCurrent\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"Simulator\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"IssueBatteryLow\",\"canConvertToFault\":false,\"faultOverriddenErrorKey\":null},{\"provider\":\"Simulator\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Issue_LuminaireTypeWattageIsZero\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"Simulator\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"Issue_Groupfault\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3519\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3520\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3521\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null},{\"provider\":\"AmpLight\",\"creationDelayInHours\":0.0,\"closeDelayInHours\":0.0,\"faultErrorKey\":\"issuetype_3535\",\"canConvertToFault\":true,\"faultOverriddenErrorKey\":null}],\"orders\":[],\"version\":\"1.0\"}";
        List<JsonEntity> list = jsonParser.parse(json,"Energy");

        for (JsonEntity jsonPropertyList : list) {
            System.out.println("jsonPropertyList = " + jsonPropertyList.getName());
            System.out.println("jsonPropertyList = " + jsonPropertyList.getIndex());
            List<JsonProperty> properties = jsonPropertyList.getProperties();
            for (JsonProperty property : properties) {
                System.out.println("property = " + property.getKey());
                System.out.println("package = " + property.getPackageName());
            }

            System.out.println("=============== = " );
        }
    }


}
